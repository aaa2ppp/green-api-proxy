# Green API Proxy

Минималистичный прокси для работы с [Green API](http://green-api.com) через браузер без CORS-ошибок.

## Быстрый старт

### 1. Клонируем и настраиваем:

```bash
git clone https://github.com/yourname/green-api-proxy.git  
cd green-api-proxy
cp env.example .env
```

### 2. (Опционально) Генерируем самоподписанный сертификат:

```bash
CN=my-domain.local make cert
```

### 3. Запускаем:

```bash
make all
make run
```

### 4. Открываем в браузере:

http://localhost:8087/green-api/  

(Или https://localhost:8087/green-api/ если включён TLS через переменную окружения)


## Конфигурация

Сервис настраивается через переменные окружения. Пример конфигурации находится в файле [env.example](./env.example)

## Что под капотом

- **Проксирует запросы** к `api.green-api.com` -- это главное!
- **Передача токена через заголовок** `X-ApiToken` -- токен не светится в URL и логах цепочки прокси
- **Логирование всех входящих запросов** на уровне `DEBUG`
- **Подробное логирование перенаправляемых запросов** к [Green API](http://green-api.com) на уровне `DEBUG-1` -- шикарно видеть, что пришло, и что отправили
- **Самоподписанные SSL сертификаты** для локальной разработки (опционально). Предполагается, что перед сервисом стоит Nginx, который управляет сертификатами в продакшене
- **CORS** -- есть, но не тестировался всерьёз, так что считай недокументированная фича :)


## Интерфейс

Веб-интерфейс доступен по адресу `/green-api/` и предоставляет форму для тестирования API.

Поддерживаемые методы [Green API](http://green-api.com):
- `getSettings`
- `getStateInstance`
- `sendMessage`
- `sendFileByUrl`


### Использование:

- Введите `idInstance` и `ApiTokenInstance`
- Выберите метод API
- Заполните необходимые параметры
- Нажмите кнопку вызова метода
- Результат отобразится в поле "Ответ"
- Интерфейс автоматически формирует запросы к прокси и отображает ответы от [Green API](http://green-api.com).
